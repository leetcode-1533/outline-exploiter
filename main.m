function main(s1)
% s1 = 'te.png';
global alla;

global a;
global b;
test = sizeTEMP(s1);
% % % % % plotori();
hold on;
test = 1 - test;
alla = double(test);
[xsize,ysize] = size(test);
for i = 1: xsize
    for j = 1:ysize
        if alla(i,j)==0
            rei=i;
            rej=j;
            break
            break
        end
    end
end

x=rei;
rex =x;
y=rej;
rey =y;
i=0;
[x,y] = nexter(x,y,{[-1,1],[0,1],[1,1],[1,0],[1,-1],[0,-1],[-1,-1],[-1,0]});
temp(1,:) = [rex,rey];
temp(2,:)=[0,0];
% while temp(end,1)~=57 || temp(end,2)~=22
% [x,y] = nexter(temp(end,1),temp(end,2),{[-1,1],[0,1],[1,1],[1,0],[1,-1],[0,-1],[-1,-1],[-1,0]});

%index
while x~=rex || y~=rey
    rex = x;
    rey = y;
    i = i+1;
    [x,y] = nexter(x,y,{[-1,1],[0,1],[1,1],[1,0],[1,-1],[0,-1],[-1,-1],[-1,0]});
%     hold on;
%     plot(rex,rey,'*');
    if x~=rex || y ~= rey
        alla(rex,rey) = 500;
        temp(i,:) = [rex,rey];
    end   
end
% % % hold on;
% % % axis([0,117,0,120]);
% % % for i = 1 : length(temp)
% % %     if(mod(i,5)==0)
% % %     text(temp(i,1),temp(i,2),sprintf('%d',i));
% % %     end
% % % end
% [x,y] = nexter(temp(end,1),temp(end,2),{[-1,-1],[0,-1],[1,-1],[1,0],[1,1],[0,1],[0,1],[-1,1],[-1,0]});
% while x~=rex || y~=rey
%     rex = x;
%     rey = y;
%     i = i+1;
%     [x,y] = nexter(x,y,{[-1,-1],[0,-1],[1,-1],[1,0],[1,1],[0,1],[0,1],[-1,1],[-1,0]});
%     hold on;
%     plot(rex,rey,'*');
%     if x~=rex || y ~= rey
%         all(rex,rey) = 500;
%         temp(i,:) = [rex,rey];
%     end   
% end
% end



% polygon
bquick = polygon(temp,2.2);
% % % plot(bquick(:,1),bquick(:,2));
% for i = 1 : 5:72
%     p_bez=test_bezier(bquick(i:i+5,:));
%     plot(p_bez(:,1),p_bez(:,2));
% end
% plot(bquick(:,1),bquick(:,2),'*-');

%bezier
maxgap = 0;
for i = 1 :length(bquick)-2
    fined = findendp(bquick,i);
if abs(i-fined) > maxgap
    maxgap = abs(fined-i);
    besti = i;
end
end
bquick=[bquick(besti:end,:);bquick(1:besti,:)];
% for i = 1 : length(bquick)-2
%      findendp(bquick,i)
%      break
% end
i = 1;
recorder =[];
while i<=length(bquick)-2
    i = findendp(bquick,i);
    recorder=[recorder;i];
end
plottest(recorder,bquick);


